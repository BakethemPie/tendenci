{% extends "staff/base.html" %}
{% load base_filters %}
{% load pagination_tags %}
{% load staff_tags %}
{% load perm_tags %}

{% block title %}Staff{% endblock %}

{% block extra_head %}
{{ block.super }}
<style type="text/css">
{% include "staff/media/css/staff.css" %}
.t .staff-search-wrap {width: 100%}
</style>
<link rel="alternate" type="application/rss+xml" title="Latest Staff" href="{% url staff.feed %}" />
{% endblock %}

{% block body %}
{# list_staff as staff limit=30 order="-update_dt" #}

{% autopaginate staff 9 %}
{% has_perm user staff.add_staff as can_add_staff %}
<div class="t">
    <h1>{{ SITE_GLOBAL_SITEDISPLAYNAME }} Staff List</h1>
    {% staff_search %}
    {% if can_add_staff %}
    <div><a href="{% url admin:staff_staff_add %}">Add Staff</a></div>
    {% endif %}
    <div class="staff-search-wrap-list clearfix">
        {% for staff_member in staff %}
        {% with staff_member.object as staff_member %}
            <div class="staff-item">
            {% for img in staff_member.stafffile_set.all %}
                {% if img.photo_type == "professional" %}
                <div class="member-photo">  
                    <a href="{{ staff_member.get_absolute_url }}"><img alt="Contact {{ staff_member.name }}" src="{% url file img.pk %}184x184" /></a><br />
                    <h4><a href="{{ staff_member.get_absolute_url }}">{{ staff_member.name }}</a></h4>
                    <p>{% if staff_member.position %}<strong>{{ staff_member.position }}</strong><br />{% endif %}
                    {% if staff_member.department %}{{ staff_member.department }}{% endif %}</p>
                </div>
                {% endif %}
            {% endfor %}
            </div><!-- /staff-item -->
        {% endwith %}
        {% empty %}
                
            <p>0 Staff Found</p>
        {% endfor %}
    </div>
    {% paginate %}
</div>
{% endblock body %}

{% block featured_staff %}
{% endblock %}

{% block extra_body %}
{{ block.super }}
    <script type="text/javascript" src="{{ STATIC_URL }}js/global/dropdown.js"></script>
	<script type="text/javascript">
		var iconrow = new dropdown({
			container:	'more-options-wrap',
			trigger:	'more-options-trigger',
			target:		'more-options-target'
		});
	</script>
{% endblock %}
