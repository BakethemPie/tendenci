{% load styled_forms %}

{% if form.errors %}
<div class="errors">
There were some problems in the form. Please review. Thanks!
</div>
{% endif %}

{% if form.fieldsets %}
	{% for fieldset in form.fieldsets %}
	  {% if fieldset.boundfields %}
	  <fieldset class="{{ fieldset.classes }}">
		{% if fieldset.legend %}
		  <legend>{{ fieldset.legend }}</legend>
		{% endif %}
		{% if fieldset.description %}
		  <p class="section-description">{{ fieldset.description }}</p>
		{% endif %}
		{% for field in fieldset %}
		{% if field.is_hidden %}
		    {{ field }}
		{% else %}
		    <div class="form-field">
		        <div class="{{ field.auto_id }}">
		        	{% if field|is_checkbox %}
		            	<div class="checkbox">
		               		{% if field.errors %}         
		                    <div class="error">
		                        {% for error in field.errors %}
		                        <p>{{ error }}</p>
		                        {% endfor %}
		                    </div>
		                    {% endif %}  
		                    <div class="field">
		                        {{ field }}
		                    </div> 
		                    <div class="label{% if field.field.required %} required{% endif %}">
		                        {{ field.label_tag }}
		                    </div> 
		                    {% if field.help_text %}
		                    <div class="help-text">{{ field.help_text }}</div>   
		                    {% endif %}
		                </div>
		                <div style="clear: both"><!-- IE7 --></div>
		            {% else %}
		                <div class="label{% if field.field.required %} required{% endif %}">
		                    {{ field.label_tag }}
		                </div>
		                {% if field.errors %}
		                <div class="error">
		                    {% for error in field.errors %}
		                    <p>{{ error }}</p>
		                    {% endfor %}
		                </div>
		                {% endif %}   
		                <div class="field">
		                    {{ field }}
		                </div>  
		                {% if field.help_text %}
		                <div class="help-text">{{ field.help_text }}</div>   
		                {% endif %}
		            {% endif %}
		         </div>       
		    </div>
		{% endif %}
		{% endfor %}   	
	  </fieldset>
	  {% endif %}
	{% endfor %}
{% else %}
	{% for field in form %}
	{% if field.is_hidden %}
	    {{ field }}
	{% else %}
	    <div class="form-field">
	        <div class="{{ field.auto_id }}">
	        	{% if field|is_checkbox %}
	            	<div class="checkbox">
	               		{% if field.errors %}         
	                    <div class="error">
	                        {% for error in field.errors %}
	                        <p>{{ error }}</p>
	                        {% endfor %}
	                    </div>
	                    {% endif %}  
	                    <div class="field">
	                        {{ field }}
	                    </div> 
	                    <div class="label{% if field.field.required %} required{% endif %}">
	                        {{ field.label_tag }}
	                    </div> 
	                    {% if field.help_text %}
	                    <div class="help-text">{{ field.help_text }}</div>   
	                    {% endif %}
	                </div>
	                <div style="clear: both"><!-- IE7 --></div>
	            {% else %}
	                <div class="label{% if field.field.required %} required{% endif %}">
	                    {{ field.label_tag }}
	                </div>
	                {% if field.errors %}
	                <div class="error">
	                    {% for error in field.errors %}
	                    <p>{{ error }}</p>
	                    {% endfor %}
	                </div>
	                {% endif %}   
	                <div class="field">
	                    {{ field }}
	                </div>  
	                {% if field.help_text %}
	                <div class="help-text">{{ field.help_text }}</div>   
	                {% endif %}
	            {% endif %}
	         </div>       
	    </div>
	{% endif %}
	{% endfor %}   
{% endif %}