{% extends "memberships/base-wide.html" %}
{% load membership_tags %}
{% load base_tags %}
{% load base_filters %}

{% block title %}Import Memberships from CSV file{% endblock %}

{% block extra_head %}
{{ block.super }}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/memberships.css">

	<style type="text/css">

		table {
			margin-top: 5px;
			white-space: nowrap;
			border: 1px solid silver;
		}

		tr.header {
			background-color: #DDD;
			text-align: left;
		}

		tr.even {
			background-color: #EEE;
			border: 1px solid silver;
			border-top: 0;
			border-bottom: 0;
		}

		tr td {
			padding: 10px;
		}

	</style>

{% endblock %}

{% block body %}

<div id="import-wrap" class="preview">

	<h1>Membership Import Preview</h1>

	<p class="timestamp">Step 3/4 &middot; {{ datetime.now }}</p>

	<p class="msg"><em>{{ memberships|length}}</em> import{{ memberships|length|pluralize }}; 
	<em>{{ added|length }}</em> will be added, and <em>{{ skipped|length }}</em> will be skipped.
	<em><a href="{% url membership_import_confirm %}">Import Now &rarr;</a></em></p>

	<table>
		<tr class="header">
			<td></td>
			<td>Name</td>
			<td>Number</td>
			<td>Email</td>
			<td>Join Date</td>
			<td>Expire Date</td>
		</tr>

	{% for membership in memberships|slice:":10" %}
		<tr class="{% cycle 'odd' 'even' as rowcolors %}">
			<td>{{ forloop.counter }}</td>
			<td><div>{% firstof membership.user.get_full_name "No Name" %}</div></td>
			<td><div>{{ membership.member_number }}</div></td>
			<td><div>{{ membership.user.email }}</div></td>
			<td><div>{{ membership.subscribe_dt|date:"M d, Y" }}</div></td>
			<td><div>{{ membership.expire_dt|date:"M d, Y" }}</div></td>
		</tr>
	{% endfor %}
	</table>

</div>
{% endblock %}