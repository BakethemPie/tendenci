{% extends "site_base.html" %}
{% load cache %}
{% load dashboard_tags %}
{% load perm_tags %}
{% load base_tags %}
{% load base_filters %}

{% block title %}Dashboard{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="/site_media/static/css/dashboard.css">
{% endblock %}

{% block body %}

{% has_perm user events.view_event as view_events %}
{% has_perm user articles.view_article as view_articles %}
{% has_perm user jobs.view_job as view_jobs %}
{% has_perm user news.view_news as view_news %}
{% has_perm user directories.view_directory as view_directories %}
{% has_perm user photos.view_image as view_photos %}
{% has_perm user stories.view_story as view_stories %}
{% has_perm user pages.view_page as view_pages %}
{% has_perm user entities.view_entity as view_entities %}
{% has_perm user files.view_file as view_files %}
{% has_perm user contributions.view_contribution as view_contributions %}
{% has_perm user locations.view_location as view_locations %}
{% has_perm user settings.view_setting as view_settings %}

{% has_perm user settings.view_contact as view_contacts %}

{% has_perm user settings.view_invoice as view_invoices %}
{% has_perm user settings.view_group as view_groups %}

{% has_perm user eventlogs.view_eventlog as view_eventlogs %}
{% has_perm user eventlogs.view_setting as view_settings %}

{% is_developer user as is_developer %}

{% is_admin user as is_admin %}


{% dashboard_nav user %}	

<div class="main-panel">
	<div class="modules">
	<ul>

		{% if MODULE_USERS_ENABLED %}
    	<li class="users"><a href="{% url profile.search %}"><span>{% firstof MODULE_USERS_LABEL "Users" %}</span></a></li>
		{% endif %}

		{% if MODULE_GROUPS_ENABLED %}
		{% if view_groups %}
    	<li class="groups"><a href="{% url group.search %}"><span>{% firstof MODULE_GROUPS_LABEL "Groups" %}</span></a></li>
		{% endif %}
		{% endif %}

		{% if MODULE_ARTICLES_ENABLED %}
		{% if view_articles %}
    	<li class="articles"><a href="{% url article.search %}"><span>{% firstof MODULE_ARTICLES_LABEL "Articles" %}</span></a></li>
		{% endif %}
		{% endif %}

		{% if view_jobs %}
    	<li class="jobs"><a href="{% url job.search %}"><span>{% firstof MODULE_JOBS_LABEL "Jobs" %}</span></a></li>
		{% endif %}

		{% if MODULE_NEWS_ENABLED %}
		{% if view_news %}
    	<li class="news"><a href="{% url news.search %}"><span>{% firstof MODULE_NEWS_LABEL "News" %}</span></a></li>
		{% endif %}
		{% endif %}

		{% if MODULE_PHOTOS_ENABLED %}
		{% if view_photos %}
        <li class="photo-albums"><a href="{% url photoset_latest %}"><span>{% firstof MODULE_PHOTOSETS_LABEL "Albums" %}</span></a></li>
		{% endif %}
		{% endif %}

		{% if view_stories %}
    	<li class="stories"><a href="{% url story.search %}"><span>{% firstof MODULE_STORIES_LABEL "Stories" %}</span></a></li>
		{% endif %}

		{% if MODULE_PAGES_ENABLED %}
		{% if view_pages %}
    	<li class="pages"><a href="{% url page.search %}"><span>{% firstof MODULE_PAGES_LABEL "Pages" %}</span></a></li>
		{% endif %}
		{% endif %}

		{% if view_entities %}
		{% if MODULE_ENTITIES_ENABLED %}
     	<li class="entities"><a href="{% url entity.search %}"><span>{% firstof MODULE_ENTITIES_LABEL "Entities" %}</span></a></li>
		{% endif %}
		{% endif %}

		{% if MODULE_FILES_ENABLED %}
		{% if view_files %}
     	<li class="files"><a href="{% url file.search %}"><span>{% firstof MODULE_FILES_LABEL Files %}</span></a></li>
		{% endif %}
		{% endif %}

		{% if view_locations %}
		{% if MODULE_LOCATIONS_ENABLED %}
		<li class="locations"><a href="{% url location.search %}"><span>{% firstof MODULE_LOCATION_LABEL  "Locations" %}</span></a></li>
		{% endif %}
		{% endif %}

		{% if view_contributions %}
		<li class="contributions"><a href="{% url contribution.search %}"><span>{% firstof MODULE_CONTRIBUTION_LABEL  "Contributions" %}</span></a></li>
		{% endif %}

		{% if view_contacts %}
		{% if MODULE_CONTACTS_ENABLED %}
		<li class="contacts"><a href="{% url contact.search %}"><span>{% firstof MODULE_CONTACTS_LABEL "Contacts" %}</span></a></li>
		{% endif %}
		{% endif %}

		{% if view_settings %}
     	<li class="settings"><a href="{% url settings %}"><span>Settings</span></a></li>
 		{% endif %}

		{% if view_eventlogs %}
        <li class="event-logs"><a href="{% url event_logs %}"><span>{% firstof MODULE_EVENT_LOGS_LABEL  "Event Logs" %}</span></a></li>
 		{% endif %}

		{% if view_invoices %}
		{% if MODULE_INVOICES_ENABLED %}
         <li class="invoices"><a href="{% url invoice.search %}"><span>{% firstof MODULE_INVOICES_LABEL  "Invoices" %}</span></a></li>
 		{% endif %}
 		{% endif %}

 		<div style="clear: both"><!-- IE7 --></div>
    </ul>
    </div> <!-- modules -->


    <div class="rss-feeds">
        <div class="rss-feed">
        	<h3>Tendenci Blog</h3>
			{% cache 86400 tendenci_blog_rss %}
                {% get_rss "http://blog.tendenci.com/feed/" as rss %}
                <ul>
                {% for entry in rss.entries|slice:":3" %}
                    <li>
                        <div class="rss-title"><a href="{{ entry.link }}">{{ entry.title }}</a></div>
                        <div class="rss-pubdate">{{ entry.updated_parsed|rss_date }}</div>
                    </li>
                {% endfor %}
                </ul>
			{% endcache %}
        </div>
        
        <div class="rss-feed">
        	<h3>Tendenci Help</h3>
			{% cache 86400 tendenci_help_rss %}
                {% get_rss "http://www.tendenci.com/en/rss/helpfiles/" as rss %}
                <ul>
                {% for entry in rss.entries|slice:":3" %}
                    <li>
                        <div class="rss-title"><a href="{{ entry.link }}">{{ entry.title }}</a></div>
                        <div class="rss-pubdate">{{ entry.updated_parsed|rss_date }}</div>
                    </li>
                {% endfor %}
                </ul>
			{% endcache %}
        </div>
    </div>

</div> <!-- main-panel -->


<div class="side-panel">
	{% if is_admin %}
	<div class="admin-quick-links">
    <h3>Admin Quick Links</h3>
	<ul>
		{% if MODULE_PAGES_ENABLED %}
    	<li><a href="{% url page.add %}">Add a page</a></li>
		{% endif %}

		<li><a href="{% url haystack_search %}">Search All Modules</a></li>

		<!--<li><a href="{% url entity.search %}">Search entities</a></li>
    	<li><a href="javascript:;">Edit navigation</a></li>
    	<li><a href="{% url event_log.search %}">Search event logs</a></li>
    	<li><a href="{% url profile.search %}">Search users</a></li>-->
    	<li><a href="{% url newsletter.add %}">Make a newsletter</a></li>
    	<!-- <li><a href="{% url settings %}">Change website settings</a></li> -->
    	<li><a href="{% url settings %}">Enable/Disable modules</a></li>
    	<!-- <li><a href="javascript:;">Update SEM</a></li> -->
        <li><a href="/admin/">Admin Panel</a></li>
    </ul>
    </div>
    	
	<div class="theme-management">
    <h3>Update Theme</h3>
	<ul>
		<li><a href="{% url theme_editor %}?file=/media/css/styles.css">Update Styles</a></li>
		<li><a href="{% url theme_editor %}?file=/templates/base.html">Update Template</a></li>
		<li><a href="{% url theme_editor %}?file=/templates/nav.html">Update Navigation</a></li>
    	<li><a href="{% url theme_editor %}?file=/templates/footer.html">Update Footer</a></li>
    </ul>
    </div>
    {% endif %}
</div>

<div style="clear:both;"></div>

{% endblock %}