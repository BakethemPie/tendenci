{% extends "events/base.html" %}
{% load event_tags %}
{% load styled_forms %}

{% block title %}{{ block.super }}Register{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/events.css">
{% endblock %}

{% block body %}

<style type="text/css">

	.t h1 {
		margin-bottom: 0;
	}
	.t div.event-title {
		font-size: 1.2em;
		margin-bottom: 10px;
	}

	.price {
		font-size: 1.6em;
		margin-bottom: 10px;
		background-color: #FFC;
		padding: 10px;
	}

</style>

<div class="t">    
    {% event_nav user %}
    <h1>Register for Event</h1>
    <div class='event-title'>{{ event.title }}</div>

	{{ form.non_field_errors }}
	{% for field in form %}
		{% if field.errors %}
			<li><a href="javascript:;">{{ field.label_tag }}</a></li>	
		{% endif %}
	{% endfor %}

	<div class="form-wrap">
    	<form action="{% url event.register event.pk %}" method="post">
    	<div class="forms">

			{{ form.price }} {# hidden field #}

			{% if form.name %}
			<div class="form-field">
				<div class="error">{{ form.name.errors }}</div>
				<div class="label required">Name</div>
				<div class="field">{{ form.name }}</div>
			</div>
			{% endif %}

			{% if form.email %}
			<div class="form-field">
				<div class="error">{{ form.email.errors }}</div>
				<div class="label required">Email</div>
				<div class="field">{{ form.email }}</div>
			</div>
			{% endif %}	
			
			{% if not request.user.is_authenticated %}
				<div class="form-field">
					<div class="error">{{ form.captcha.errors }}</div>
					<div class="label required">{{ form.captcha.label}}</div>
					<div class="field">{{ form.captcha }}</div>
				</div>	
			{% endif %}

       		<input type="submit" value="Register for this Free Event" />
		</div>
        </form>
	</div>

</div>
{% endblock %}

{% block extra_body %}
{% endblock %}