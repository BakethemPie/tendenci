{% extends "events/base.html" %}
{% load event_tags %}
{% load styled_forms %}
{% load avatar_tags %}
{% load base_filters %}

{% block title %}{{ block.super }}Register{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/events.css">
{% endblock %}

{% block body %}
<style type="text/css">
	.regconf-section {
		background-color: #F7F7F7;
		border: 1px solid silver;
		margin-bottom: 10px;
	}
	.regconf-section h2 {
		background-color: #DDD;
		padding: 10px;
	}
	.regconf-section h3 {
		margin: 10px 10px 0;
	}
	.regconf-section .event-url {
		margin-top: 0;
	}
	.regconf-section div {
		margin: 10px;
	}	
	
	.registration .avatar {
		float: left;
	}
	.registration .info {
		margin-top: 20px;
	}
	.registration .info .name,
	.registration .info .email {
		margin: 0;
	}
	
	.cancel-notice {
		background-color: #FFC;
		border: 1px solid #fcd574;
		padding: 10px 5px;
		margin-bottom: 10px;
	}

</style>

<div class="t">    
    {% event_nav user %}
    <h1>Proof of Registration</h1>

	{% if registrant.cancel_dt %}
		<div class="cancel-notice">
			Registration Canceled on {{ registrant.cancel_dt|date_short }}
		</div>
	{% endif %}

	<div class="regconf-section event">
		<h2>Event Details</h2>
		<h3>{{ event.title }}</h3>

		<div class="event-url">
			<a href="{% url event event.pk %}">
				{{ SITE_GLOBAL_SITEURL }}{% url event event.pk %}
			</a>
		</div>

		<h3>Registration Price: ${{ registration.amount_paid|floatformat:"2" }}</h3>
		<div>{{ event.description|safe }}</div>
	</div>

	<div class="regconf-section registration">
		<h2>Your Details</h2>
		<h3>
            Registration Number: {{ registration.pk }}
        </h3>
		<div class='avatar'>{% avatar registrant.user 56 %}</div>
		<div class="info">
			<div class="name">{% firstof registrant.name "Name Not Recorded" %}</div>
			<div class="email">{% firstof registrant.email "Email Not Recorded" %}</div>
		</div>
        {% if not registrant.cancel_dt %}
        {% if user.is_authenticated %}
            <div><a href="{% url event.cancel_registration event.pk registration.pk %}">Cancel Registation</a></div>
        {% else %}
            <div><a href="{% url event.cancel_registration event.pk registrant.hash %}">Cancel Registation</a></div>
        {% endif %}
        {% endif %}
		<div style="clear:both;"></div>
	</div>

</div>
{% endblock %}

{% block extra_body %}
{% endblock %}