{% extends "events/base.html" %}
{% load event_tags %}
{% load styled_forms %}

{% block title %}{{ block.super }}Register{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/events.css">
{% endblock %}

{% block body %}

<style type="text/css">

	.t h1 {
		margin-bottom: 0;
	}
	.t div.event-title {
		font-size: 1.2em;
		margin-bottom: 10px;
	}

	.price {
		font-size: 1.6em;
		margin-bottom: 10px;
		background-color: #FFC;
		padding: 10px;
	}

</style>

<div class="t">    
    {% event_nav user %}
    <h1>Register for Event</h1>
    <div class='event-title'>{{ event.title }}</div>

	{{ form.non_field_errors }}
	{% for field in form %}
		{% if field.errors %}
			<li><a href="javascript:;">{{ field.label_tag }}</a></li>	
		{% endif %}
	{% endfor %}

	<div class="form-wrap">
    	<form action="{% url event.register event.pk %}" method="post">
    	<div class="forms">

			{{ form.price }}

			{% if form.name %}
			<div class="form-field">
				<div class="error">{{ form.name.errors }}</div>
				<div class="label required">Name</div>
				<div class="field">{{ form.name }}</div>
			</div>
			{% endif %}

			{% if form.email %}
			<div class="form-field">
				<div class="error">{{ form.email.errors }}</div>
				<div class="label required">Email</div>
				<div class="field">{{ form.email }}</div>
			</div>
			{% endif %}

			<div class="price">Price ${{ event.registration_configuration.price|floatformat:2 }}</div>

			<div class="form-field">
				<div class="error">{{ form.payment_methods.errors }}</div>
				<div class="label required">Payment Methods Available</div>
				<div class="field">{{ form.payment_method }}</div>
			</div>			

       		<input type="submit" value="Register for this Event" />
		</div>
        </form>
	</div>

</div>
{% endblock %}

{% block extra_body %}
{% endblock %}