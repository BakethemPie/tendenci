{% extends "photos/base.html" %}

{% load i18n %}
{% load uni_form %}

{% block head_title %}{% blocktrans %}Manual Upload Form{% endblocktrans %}{% endblock %}
{% block extra_head %}
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}swfupload/swfupload.visual.css">
	<script src="{{ STATIC_URL }}swfupload/swfupload.js" type="text/javascript"></script>
	<script src="{{ STATIC_URL }}swfupload/swfupload.cookies.js" type="text/javascript"></script>
	<script src="{{ STATIC_URL }}swfupload/swfupload.handlers.js" type="text/javascript"></script>
	<script src="{{ STATIC_URL }}swfupload/swfupload.swfobject.js" type="text/javascript"></script>
	<script language="javascript" type="text/javascript">
		var swfupload;

		window.onload = function() {
			swfupload = new SWFUpload({
			debug: false,
			
			upload_url: "{% url photos.views.photos_batch_add %}",
			flash_url: "{{ STATIC_URL }}swfupload/swfupload.swf",
			post_params: {
				"title" : "", 
				"caption" : "", 
				"is_public" : true,
				"safetylevel" : "1", 
				"tags" : "", 
				"action" : "upload",
				"photoset_id" : "{{ photoset_id }}"
			},

			// File upload settings
			file_size_limit : "20480",	// 20 MB
			file_types : "*.jpg;*.jpeg;*.gif;*.tif;*.tiff",
			file_types_description : "Photos",
			file_post_name: "image",
			
			// Button settings (opens file-browse dialogue)
			button_placeholder_id: "spanButtonPlaceholder",
			button_width: 155,
			button_height: 24,
			button_cursor: SWFUpload.CURSOR.HAND,
			button_window_mode: SWFUpload.WINDOW_MODE.TRANSPARENT,

			// Action handlers
			swfupload_loaded_handler : swfUploadLoaded,
			file_queued_handler : fileQueued,
			file_queue_error_handler : fileQueueError,
			file_dialog_complete_handler : fileDialogComplete,
			upload_start_handler : uploadStart,
			upload_progress_handler : uploadProgress,
			upload_error_handler : uploadError,
			upload_success_handler : uploadSuccess,
			upload_complete_handler : uploadComplete,
			swfupload_pre_load_handler : swfUploadPreLoad,
			swfupload_load_failed_handler : swfUploadLoadFailed,

			custom_settings : {
				progressTarget : "fsUploadProgress",
				cancelButtonId : "btnCancel1",
				redirect: "/photos/batch-edit/{{ photoset_id }}"
			},

			// SWFObject settings
			minimum_flash_version : "9.0.28",
			debug: false

			});
		};
    </script>
{% endblock %}

{% block body %}    
    <div id="flashUI" style="display:none;">
    <form id="form1" name="add_photo" action="batch.asp" enctype="multipart/form-data" method="POST">
        <fieldset id="chosen-photos" style="display:none; ">
            <legend><span id="photo-queue"></span>&nbsp;Photos</legend>
            <div class="flash" id="fsUploadProgress">
            </div>
        </fieldset>
    
        <div>
    
            <span class="select-photos">
    
            <span id="spanButtonPlaceholder"></span>
            <a id="choose-photos" href="javascript:;">Choose Photo(s)</a>
    
            <a id="add-more-photos" style="display:none;" onClick="swfupload.selectFiles();"
            href="javascript:;">Add More Photos</a>
            
            <a id="remove-chosen-photos" style="display: none;" onClick="cancelQueue(swfupload);"
            href="javascript:;">Start Over</a>
            
            <a id="stop-upload" style="display: none;" onClick="cancelQueue(swfupload);"
            href="javascript:;">Cancel Upload</a>
    
            </span>
            
            <span class="queue-actions">
            <a id="upload-photos" style="display: none;" onClick="swfupload.startUpload();" href="javascript:;">Upload Photos</a>
            </span>
    
            <input type="hidden" name="albumid" value="<%=photoalbum.photoalbumid %>" />
    
        </div>
    </form>
    </div> <!-- flash uploader -->
    
    <div id="degradedUI"><h3>Loading ...</h3></div>

{% endblock %}
{% block extra_body %}


{% endblock %}