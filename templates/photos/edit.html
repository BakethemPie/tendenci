{% extends "photos/base.html" %}

{% load i18n %}
{% load humanize %}
{% load tagging_tags %}
{% load photo_tags %}

{% load base_filters %}
{% load smart_if %}

{% block title %}{% blocktrans %}Editing Photo Details{% endblocktrans %}{% endblock %}

{% block extra_head %}
	<link rel="stylesheet" type="text/css" href="/site_media/static/css/photos.css">
{% endblock %}

{% block body %}

<h1>Edit photo</h1>

<div style="margin-bottom: 10px;">{% photo_nav request.user %}</div>

<form name="photo-edit" method="post" action="">

	<div class="field-wrap">
        <div class="title">
        	<h2>{{ photo_form.title.label_tag }}</h2>
        	{{ photo_form.title }}
		</div>
        <div class="caption">
			<h2>{{ photo_form.caption.label_tag }}</h2>
        	{{ photo_form.caption }}
		</div>
        <div class="tags">
			<h2>{{ photo_form.tags.label_tag }}</h2>
        	{{ photo_form.tags }}
            {{ photo_form.tags.help_text }}
		</div>
		<div class="privacy-wrap">
            <div class="safety">{{ photo_form.safetylevel }}</div>
            <div class="public">{{ photo_form.is_public }} {{ photo_form.is_public.label_tag }}</div>
        </div>
        <div class="submit">
            <input type="hidden" name="action" value="update" />
            <input type="submit" value="Save changes" />
        </div><br />

	</div>
</form>

{% endblock %}

{% block extra_body %}
<script src="/site_media/static/js/jquery.inputfieldtext.js" type="text/javascript"></script>
<script type="text/javascript">

	// tooltip: black stylish ones
	$('.photo-sets ul li').tipsy({
		gravity: 's',
		delayIn: 1
	});

	// photoset: selectable
	$('.photo-sets ul').selectable({
		stop: function(event, ui){
			var $selected_sets = $(event.target).children();
			// enable/disable input fields
			$.each($selected_sets, function(i, element){
				$element = $(element); // jquerize it
				if($element.is('.ui-selected')){ // selected
					$element.children('input[name="photoset"]')
					.removeAttr("disabled"); // enable input field
				}
				else { // not selected
					$element.children('input[name="photoset"]')
					.attr("disabled", true); // disable input field
				}
			});
		}
	});

</script>
{% endblock %}