{% extends "photos/base.html" %}

{% load i18n %}
{% load humanize %}
{% load pagination_tags %}
{% load tagging_tags %}

{% block title %}{{ photo_set.name }}{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" type="text/css" href="/site_media/static/css/photos.css">
{% endblock %}

{% block body %}
<div class="t">
    <h1>{{ photo_set.name }}</h1>

    <div class="photos-nav">
    	<a href="{% url photoset_latest %}">&laquo; Back to albums</a>
    	<a href="{% url photoset_edit photo_set.id %}">Edit album</a>
    	<a class="delete-photoset" href="{% url photoset_delete photo_set.id %}">Delete album</a>
    	<a href="{% url photos_batch_add photo_set.id %}">Add photos</a>
    	<a href="{% url photos_batch_edit photo_set.id %}">Edit photos</a>
	</div>

	<div id="photos-wrap">
        {% if photos %}
        {% autopaginate photos 28 %}
            <div class="thumb-row clearfix">
            	{% for photo in photos %}
                <div class="gallery-photo-thumb">
                    <a href="{% url photo photo.id photo_set.id %}"><img src="{{ photo.get_small_crop_url }}" alt="{{ photo.title }}"/></a>
                    <div>From <a href="{# url profile_detail photo.member.username #}">{{ photo.member.username }}</a></div>
                </div>
            	{% endfor %}
            </div>
			<div style="clear:both;"></div>
            {% paginate %}
        {% else %}
            <p>{% trans "No photos were found." %}</p>
        {% endif %}
    </div>
</div>

<!-- delete form -->
<form name="delete-photo-set" method="POST" action="{% url photoset_delete photo_set.id %}">
    <input type="hidden" name="action" value="delete">
</form>

{% endblock %}

{% block body_bottom %}
	<script type="text/javascript" src="/site_media/static/js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript">
		$(document).ready(function(){

			// delete confirmation
			$('.delete-photoset').click(function(){
				var delete_item = confirm('Permenantly delete photo set?');	// confirm
				if(delete_item) $('form[name="delete-photo-set"]').submit() // delete: if OK
				return false;	// cancel
			});
		});
    </script>
{% endblock %}
