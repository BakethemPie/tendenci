{% extends "photos/base.html" %}

{% load i18n %}
{% load humanize %}
{% load pagination_tags %}
{% load tagging_tags %}
{% load photo_tags %}

{% block title %}{{ block.super }}{{ photo_set.name }}{% endblock %}

{% block extra_head %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="/site_media/static/css/photos.css">
{% endblock %}

{% block body %}
<div class="t" style="width:100%;">

    <div class="photos-nav">
		{% photo_set_nav request.user photo_set %}
	</div>

    <h1>{{ photo_set.name }}</h1>
    <div class="description">{{ photo_set.description|striptags|safe }}</div>
	<div id="photos-wrap">
        {% if photos %}
        {% autopaginate photos 30 %}
            <div class="thumb-row clearfix">
            	{% for photo in photos %}
                {% with photo.object as photo %}
                <div class="gallery-photo-thumb">
                    <a href="{% url photo photo.pk photo_set.pk %}"><img src="{{ photo.get_small_crop_url }}" alt="{{ photo.title }}"/></a>
                </div>
                {% endwith %}
            	{% endfor %}
            </div>
			<div style="clear:both;"></div>
            {% paginate %}
        {% else %}
            <p>{% trans "No photos were found." %}</p>
        {% endif %}
    </div>
</div>

<!-- delete form -->
<form name="delete-photo-set" method="POST" action="{% url photoset_delete photo_set.pk %}">
    <input type="hidden" name="action" value="delete">
</form>

{% endblock %}

{% block extra_body %}
    {{ block.super }}
    <script type="text/javascript">
		$(document).ready(function(){

			// delete confirmation
			$('.delete-photoset').click(function(){
				var delete_item = confirm('Permenantly delete photo set?');	// confirm
				if(delete_item) $('form[name="delete-photo-set"]').submit() // delete: if OK
				return false;	// cancel
			});
		});
    </script>
{% endblock %}
