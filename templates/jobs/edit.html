{% extends "jobs/base.html" %}
{% load job_tags %}
{% load perm_tags %}

{% block title %}{% firstof MODULE_JOBS_LABEL 'Job' %} Edit{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/jquery-ui/jquery-ui-1.8.2.custom.css">
<link rel="stylesheet" href="{{ STATIC_URL }}css/timepicker.css" />
<link rel="stylesheet" href="/site_media/static/css/jobs.css">
<script type="text/javascript" src="/site_media/static/tinymce/tiny_mce.js"></script>
{% endblock %}

{% block body %}
<div class="t">

    {% job_nav request.user job %}

    <h1>{% firstof MODULE_JOBS_LABEL 'Job' %} Edit</h1>

    <div class="job-wrap">
		<div class="options">
             <div class="quick-options">
				{% job_options request.user job %} 	       
             </div>
		</div>

	{% if form.errors %}
	<div class="errors">
		<p>Please review the fields below. Thank you.</p>
		<ul>
		{% for field in form %}
			{% if field.errors %}
				<li><a href="javascript:;">{{ field.label_tag }}</a></li>	
			{% endif %}
		{% endfor %}
		</ul>
	</div>
	{% endif %}

    <form action="{% url job.edit job.id %}" method="post">
    	<div class="forms">

			<div class="item">
				<div class="errs">{{ form.title.errors }}</div>
				<div class="label">{{ form.title.label_tag }}</div>
				<div class="field">{{ form.title }}</div>
				<div class="help">{{ form.title.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.slug.errors }}</div>
				<div class="label">{{ form.slug.label_tag }}</div>
				<div class="field">{{ form.slug }}</div>
				<div class="help">{{ form.slug.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.description.errors }}</div>
				<div class="label">{{ form.description.label_tag }}</div>
				<div class="field">{{ form.description }}</div>
				<div class="help">{{ form.description.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.list_type.errors }}</div>
				<div class="label">{{ form.list_type.label_tag }}</div>
				<div class="field">{{ form.list_type }}</div>
				<div class="help">{{ form.list_type.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.code.errors }}</div>
				<div class="label">{{ form.code.label_tag }}</div>
				<div class="field">{{ form.code }}</div>
				<div class="help">{{ form.code.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.location.errors }}</div>
				<div class="label">{{ form.location.label_tag }}</div>
				<div class="field">{{ form.location }}</div>
				<div class="help">{{ form.location.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.skills.errors }}</div>
				<div class="label">{{ form.skills.label_tag }}</div>
				<div class="field">{{ form.skills }}</div>
				<div class="help">{{ form.skills.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.experience.errors }}</div>
				<div class="label">{{ form.experience.label_tag }}</div>
				<div class="field">{{ form.experience }}</div>
				<div class="help">{{ form.experience.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.education.errors }}</div>
				<div class="label">{{ form.education.label_tag }}</div>
				<div class="field">{{ form.education }}</div>
				<div class="help">{{ form.education.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.level.errors }}</div>
				<div class="label">{{ form.level.label_tag }}</div>
				<div class="field">{{ form.level }}</div>
				<div class="help">{{ form.level.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.period.errors }}</div>
				<div class="label">{{ form.period.label_tag }}</div>
				<div class="field">{{ form.period }}</div>
				<div class="help">{{ form.period.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-checkbox">
				<div class="errs">{{ form.is_agency.errors }}</div>
				<div class="field">{{ form.is_agency }}</div>
				<div class="label">{{ form.is_agency.label_tag }}</div>
				<div class="help">{{ form.is_agency.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.percent_travel.errors }}</div>
				<div class="label">{{ form.percent_travel.label_tag }}</div>
				<div class="field">{{ form.percent_travel }}</div>
				<div class="help">{{ form.percent_travel.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_method.errors }}</div>
				<div class="label label-wrap">{{ form.contact_method.label_tag }}</div>
				<div class="field">{{ form.contact_method }}</div>
				<div class="help">{{ form.contact_method.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.position_reports_to.errors }}</div>
				<div class="label"><label for="id_position_reports_to">Reports to</label></div>
				<div class="field">{{ form.position_reports_to }}</div>
				<div class="help">{{ form.position_reports_to.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.salary_from.errors }}</div>
				<div class="label">{{ form.salary_from.label_tag }}</div>
				<div class="field">{{ form.salary_from }}</div>
				<div class="help">{{ form.salary_from.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.salary_to.errors }}</div>
				<div class="label">{{ form.salary_to.label_tag }}</div>
				<div class="field">{{ form.salary_to }}</div>
				<div class="help">{{ form.salary_to.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.computer_skills.errors }}</div>
				<div class="label label-wrap">{{ form.computer_skills.label_tag }}</div>
				<div class="field">{{ form.computer_skills }}</div>
				<div class="help">{{ form.computer_skills.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.requested_duration.errors }}</div>
				<div class="label label-wrap"><label for="id_requested_duration">Duration</label></div>
				<div class="field">{{ form.requested_duration }}</div>
				<div class="help">{{ form.requested_duration.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-dt">
				<div class="errs">{{ form.activation_dt.errors }}</div>
				<div class="label">{{ form.activation_dt.label_tag }}</div>
				<div class="field">{{ form.activation_dt }}</div>
				<div class="help">{{ form.activation_dt.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-dt">
				<div class="errs">{{ form.post_dt.errors }}</div>
				<div class="label">{{ form.post_dt.label_tag }}</div>
				<div class="field">{{ form.post_dt }}</div>
				<div class="help">{{ form.post_dt.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-dt">
				<div class="errs">{{ form.expiration_dt.errors }}</div>
				<div class="label">{{ form.expiration_dt.label_tag }}</div>
				<div class="field">{{ form.expiration_dt }}</div>
				<div class="help">{{ form.expiration_dt.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.job_url.errors }}</div>
				<div class="label">{{ form.job_url.label_tag }}</div>
				<div class="field">{{ form.job_url }}</div>
				<div class="help">{{ form.job_url.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.design_notes.errors }}</div>
				<div class="label">{{ form.design_notes.label_tag }}</div>
				<div class="field">{{ form.design_notes }}</div>
				<div class="help">{{ form.design_notes.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.entity.errors }}</div>
				<div class="label">{{ form.entity.label_tag }}</div>
				<div class="field">{{ form.entity }}</div>
				<div class="help">{{ form.entity.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-text">
				Contact Information
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_company.errors }}</div>
				<div class="label"><label for="id_contact_company">Company</label></div>
				<div class="field">{{ form.contact_company }}</div>
				<div class="help">{{ form.contact_company.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_name.errors }}</div>
				<div class="label"><label for="id_contact_name">Name</label></div>
				<div class="field">{{ form.contact_name }}</div>
				<div class="help">{{ form.contact_name.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_address.errors }}</div>
				<div class="label"><label for="id_contact_address">Address</label></div>
				<div class="field">{{ form.contact_address }}</div>
				<div class="help">{{ form.contact_address.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_address2.errors }}</div>
				<div class="label"><label for="id_contact_address2">Address 2</label></div>
				<div class="field">{{ form.contact_address2 }}</div>
				<div class="help">{{ form.contact_address2.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_city.errors }}</div>
				<div class="label"><label for="id_contact_city">City</label></div>
				<div class="field">{{ form.contact_city }}</div>
				<div class="help">{{ form.contact_city.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_state.errors }}</div>
				<div class="label"><label for="id_contact_state">State</label></div>
				<div class="field">{{ form.contact_state }}</div>
				<div class="help">{{ form.contact_state.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_zip_code.errors }}</div>
				<div class="label"><label for="id_contact_zip_code">Zip Code</label></div>
				<div class="field">{{ form.contact_zip_code }}</div>
				<div class="help">{{ form.contact_zip_code.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_country.errors }}</div>
				<div class="label"><label for="id_contact_country">Country</label></div>
				<div class="field">{{ form.contact_country }}</div>
				<div class="help">{{ form.contact_country.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_phone.errors }}</div>
				<div class="label"><label for="id_contact_phone">Phone</label></div>
				<div class="field">{{ form.contact_phone }}</div>
				<div class="help">{{ form.contact_phone.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_fax.errors }}</div>
				<div class="label"><label for="id_contact_fax">Fax</label></div>
				<div class="field">{{ form.contact_fax }}</div>
				<div class="help">{{ form.contact_fax.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_email.errors }}</div>
				<div class="label"><label for="id_contact_email">Email</label></div>
				<div class="field">{{ form.contact_email }}</div>
				<div class="help">{{ form.contact_email.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item">
				<div class="errs">{{ form.contact_website.errors }}</div>
				<div class="label"><label for="id_contact_website">Website</label></div>
				<div class="field">{{ form.contact_website }}</div>
				<div class="help">{{ form.contact_website.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-hr-long"></div>

			<div class="item">
				<div class="errs">{{ form.tags.errors }}</div>
				<div class="label">{{ form.tags.label_tag }}</div>
				<div class="field">{{ form.tags }}</div>
				<div class="help">{{ form.tags.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-checkbox">
				<div class="errs">{{ form.allow_anonymous_view.errors }}</div>
				<div class="field">{{ form.allow_anonymous_view }}</div>
				<div class="label">{{ form.allow_anonymous_view.label_tag }}</div>
				<div class="help">{{ form.allow_anonymous_view.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-checkbox">
				<div class="errs">{{ form.allow_user_view.errors }}</div>
				<div class="field">{{ form.allow_user_view }}</div>
				<div class="label">{{ form.allow_user_view.label_tag }}</div>
				<div class="help">{{ form.allow_user_view.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-checkbox">
				<div class="errs">{{ form.allow_user_edit.errors }}</div>
				<div class="field">{{ form.allow_user_edit }}</div>
				<div class="label">{{ form.allow_user_edit.label_tag }}</div>
				<div class="help">{{ form.allow_user_edit.help_text }}</div>
				<div class="clear"></div>
			</div>

			<div class="item-hr-clear"></div>

			<div class="item">
				<div class="errs">{{ form.user_perms.errors }}</div>
				<div class="label">{{ form.user_perms.label_tag }}</div>
				<div class="field">{{ form.user_perms }}</div>
				<div class="help">{{ form.user_perms.help_text }}</div>
				<div class="clear"></div>
			</div>

			{% is_admin user as admin %}
			{% if admin %}
			<div class="admin-block">

				<div class="item-text">
					Administrators Only
				</div>

				<div class="item-checkbox">
					<div class="errs">{{ form.status.errors }}</div>
					<div class="field">{{ form.status }}</div>
					<div class="label">{{ form.status.label_tag }}</div>
					<div class="help">{{ form.status.help_text }}</div>
					<div class="clear"></div>
				</div>
	
				<div class="item">
					<div class="errs">{{ form.status_detail.errors }}</div>
					<div class="label">{{ form.status_detail.label_tag }}</div>
					<div class="field field-short">{{ form.status_detail }}</div>
					<div class="help">{{ form.status_detail.help_text }}</div>
					<div class="clear"></div>
				</div>
			</div>
			{% endif %}

        </div>
        <input type="submit" value="Save changes" />
    </form>

    </div>

</div>
{% endblock %}

{% block extra_body %}
	<script type="text/javascript" src="{{ STATIC_URL }}js/global/tinymce.event_handlers.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}js/jquery-ui-1.8.2.custom.min.js"></script>
	<script src="{{ STATIC_URL }}js/jquery.time.picker.js" type="text/javascript"></script>
    <script type="text/javascript">
		$(document).ready(function(){
			// delete confirmation
			$('.delete').click(function(){
				var delete_job = confirm('Permenantly delete {% firstof MODULE_JOBS_LABEL 'Job' %}?');	// confirm
				if(delete_job) $('.t').find('form[name="job-delete"]').submit() // delete: if OK
				return false;	// cancel
			});
		});
    </script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/global/dropdown.js"></script>
	<script type="text/javascript">
	var iconrow = new dropdown({
		container:	'more-options-wrap',
		trigger:	'more-options-trigger',
		target:		'more-options-target'
	});
	</script>
	<script type="text/javascript">
		$(".datepicker").datepicker({ dateFormat: 'yy-mm-dd' });
		$('.timepicker').timePicker({
		  show24Hours: false,
		  step: 15
		});
	</script>
{% endblock %}